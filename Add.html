<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Add</title>
    </head>
<body>
    <div class="container">
        <p>
            Please enter the information below! 
        </p>
        <form method="POST" action="Add.php" >
            <table border="1">
            <tr>
                <th>Date: </th>
                <td>
                    <input type="print_date" id=" date" name="print_date">
                </td>
            </tr>
            <tr>
                <th>Title: </th>
                <td>
                    <input type="text" id="title" name="title">
                </td>
            </tr>
            <tr>
                <th>Reason: </th>
                <td>
                    <input type="text" id="reason" name="reason">
                </td>
            </tr>
            <tr>
                <th>Plan name: </th>
                <td>
                    <input type="text" id="plan_name" name="plan_name">
                    <button type="submit" class="btn2">Add next plan</button>
                    <p><a href="Searchplan.html" target="_blank">Search plan</a></p>
                </td>
            </tr>
        </table>
        <button type="submit" class="btn2">Build inventory</button>
        </form>
        <p><a href="Records.html" target="_blank">Keeping list</a></p>
    </div>
    
    <script>
        document.getElementById('addForm').addEventListener('submit', function(event) {
            event.preventDefault(); // 阻止表单的默认提交行为

            var form = this;
            var xhr = new XMLHttpRequest();
            xhr.open('POST', form.action, true);
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

            xhr.onload = function() {
                if (xhr.status === 200) {
                    window.location.href = 'Records.html'; // 成功提交后跳转到 Records.html
                } else {
                    console.error('An error occurred: ' + xhr.statusText);
                }
            };

            var formData = new FormData(form);
            var data = new URLSearchParams(formData).toString();
            xhr.send(data);
        });
    </script>
</body>
</html>
